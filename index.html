<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Fire & Water â€“ Pixel Mobile</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body {
    margin: 0;
    background: #111;
    display: flex;
    flex-direction: column;
    align-items: center;
    color: white;
    font-family: monospace;
    touch-action: manipulation;
  }

  canvas {
    background: #000;
    image-rendering: pixelated;
    border: 2px solid #444;
  }

  .controls {
    display: flex;
    gap: 12px;
    margin-top: 10px;
  }

  .btn {
    width: 70px;
    height: 70px;
    background: #222;
    border: 2px solid #555;
    color: white;
    font-size: 24px;
    border-radius: 10px;
    user-select: none;
  }

  .btn:active {
    background: #444;
  }

  .row {
    display: flex;
    gap: 10px;
  }
</style>
</head>
<body>

<h3>ğŸ”¥ Fire & ğŸ’§ Water</h3>
<canvas id="game" width="320" height="240"></canvas>

<div class="controls">
  <div class="row">
    <button class="btn" id="left">â¬…ï¸</button>
    <button class="btn" id="right">â¡ï¸</button>
  </div>
  <button class="btn" id="jump">â¤´ï¸</button>
  <button class="btn" id="switch">ğŸ”</button>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const TILE = 16;
const GRAVITY = 0.5;

let currentPlayer = "fire";
let levelIndex = 0;

const levels = [
[
"####################",
"#.................D#",
"#..F...............#",
"#..........W.......#",
"#......####........#",
"#....~.......^.....#",
"####################"
]
];

const colors = {
  wall: "#555",
  fire: "#ff4c4c",
  water: "#4cc3ff",
  lava: "#ff3300",
  waterHazard: "#0066ff",
  door: "#00ff99"
};

let players = {
  fire: { x: 0, y: 0, vx: 0, vy: 0, onGround: false },
  water: { x: 0, y: 0, vx: 0, vy: 0, onGround: false }
};

function loadLevel() {
  const map = levels[levelIndex];
  map.forEach((row, y) => {
    [...row].forEach((cell, x) => {
      if (cell === "F") {
        players.fire.x = x * TILE;
        players.fire.y = y * TILE;
      }
      if (cell === "W") {
        players.water.x = x * TILE;
        players.water.y = y * TILE;
      }
    });
  });
}
loadLevel();

function isSolid(x, y) {
  const map = levels[levelIndex];
  const tx = Math.floor(x / TILE);
  const ty = Math.floor(y / TILE);
  if (!map[ty]) return true;
  return map[ty][tx] === "#";
}

function update(player) {
  player.vy += GRAVITY;
  player.x += player.vx;
  if (isSolid(player.x, player.y) || isSolid(player.x + TILE-1, player.y)) {
    player.x -= player.vx;
  }

  player.y += player.vy;
  if (isSolid(player.x, player.y + TILE) || isSolid(player.x + TILE-1, player.y + TILE)) {
    player.y = Math.floor(player.y / TILE) * TILE;
    player.vy = 0;
    player.onGround = true;
  } else {
    player.onGround = false;
  }
}

function drawLevel() {
  const map = levels[levelIndex];
  map.forEach((row, y) => {
    [...row].forEach((cell, x) => {
      if (cell === "#") {
        ctx.fillStyle = colors.wall;
        ctx.fillRect(x*TILE, y*TILE, TILE, TILE);
      }
      if (cell === "~") {
        ctx.fillStyle = colors.waterHazard;
        ctx.fillRect(x*TILE, y*TILE, TILE, TILE);
      }
      if (cell === "^") {
        ctx.fillStyle = colors.lava;
        ctx.fillRect(x*TILE, y*TILE, TILE, TILE);
      }
      if (cell === "D") {
        ctx.fillStyle = colors.door;
        ctx.fillRect(x*TILE, y*TILE, TILE, TILE);
      }
    });
  });
}

function drawPlayer(p, color) {
  ctx.fillStyle = color;
  ctx.fillRect(p.x, p.y, TILE, TILE);
}

function loop() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawLevel();

  update(players.fire);
  update(players.water);

  drawPlayer(players.fire, colors.fire);
  drawPlayer(players.water, colors.water);

  requestAnimationFrame(loop);
}
loop();

/* MOBILE CONTROLS */
document.getElementById("left").ontouchstart = () => players[currentPlayer].vx = -2;
document.getElementById("right").ontouchstart = () => players[currentPlayer].vx = 2;
document.getElementById("jump").ontouchstart = () => {
  if (players[currentPlayer].onGround) players[currentPlayer].vy = -8;
};
document.getElementById("switch").ontouchstart = () => {
  currentPlayer = currentPlayer === "fire" ? "water" : "fire";
};

document.addEventListener("touchend", () => {
  players[currentPlayer].vx = 0;
});
</script>

</body>
</html>
